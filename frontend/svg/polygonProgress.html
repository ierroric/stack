<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta name="viewport"
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1.0,user-scalable=no">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta charset="utf-8">
    <title>多边形进度</title>
    <link href="../css/common.css" rel="stylesheet">
    <style type="text/css">
        svg { width: 300px; height: 300px; background-color: #ccc; }
        .path { stroke-dashoffset: 0; stroke-dasharray: 0; }
    </style>
</head>
<body>

<div class="page">
    <svg id="svg">
        <path id="path" stroke-linecap="round" stroke-linejoin="round" class="path-mask"
              d="M10 10 L290 10 L10 290 Z" fill="none" stroke="#fff" stroke-width="5"></path>
        <path id="path" stroke-linecap="round" stroke-linejoin="round" class="path"
              d="M10 10 L290 10 L10 290 Z" fill="none" stroke="#faa" stroke-width="5"></path>
    </svg>
</div>

<script src="../js/jquery-1.12.4.min.js"></script>
<script type="text/javascript">
    console.log("SVG 画出闭合多边形，周长为1，可按照百分比显示周长");
    $(function () {
        var ele = $(".path").get(0);
        var length = ele.getTotalLength();  // 总长度
        var prec = .9;    // 百分比
        var target = prec * length;
        var cur = 0;

        var timer = setInterval(function () {
            cur += 5;
            if (cur >= target) clearInterval(timer);
            $(ele).css("stroke-dasharray", cur + ' 10000');
        }, 30);
    });
</script>
</body>
</html>
